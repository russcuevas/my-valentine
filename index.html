<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HVD</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&family=Poppins:wght@400;600&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background: url('https://static.vecteezy.com/system/resources/previews/002/512/501/non_2x/illustration-in-the-form-of-a-seamless-pattern-of-flowers-of-roses-and-leaves-on-a-white-background-vector.jpg')
        }

        .font-game {
            font-family: 'Cherry Bomb One', cursive;
        }

        #fill {
            transition: width 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        canvas {
            touch-action: none;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff4d88, #ff99cc);
            color: white;
            padding: 12px 18px;
            border-radius: 12px;
            font-weight: 600;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.4s ease;
            z-index: 9999;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>

<body class="h-screen w-full flex items-center justify-center m-0 overflow-hidden">

<audio id="audio" loop>
    <source src="vid.mp3" type="audio/mpeg">
</audio>

    <div id="startScreen" 
         class="fixed inset-0 bg-pink-200 flex items-center justify-center z-50">
    
        <button onclick="startGame()" 
            class="bg-pink-500 hover:bg-pink-600 text-white px-8 py-4 rounded-full text-xl font-bold shadow-lg">
            Start Game ‚ù§Ô∏è
        </button>
    
    </div>
    <div id="game-container"
        class="relative w-full max-w-[600px] h-[85vh] bg-white/40 backdrop-blur-md border-4 border-white rounded-[40px] shadow-2xl overflow-hidden flex flex-col">

        <div id="ui" class="absolute top-0 w-full p-6 text-center z-10 pointer-events-none">
            <h2 class="font-game text-2xl text-pink-600 drop-shadow-sm leading-tight">
                Sige nga, subukan mo kung <br> magaling ka sumalo? saluhin mo ko HAHA!
            </h2>

            <div class="mt-4 flex flex-col items-center">
                <div class="text-pink-700 font-bold text-lg mb-1">
                    Score: <span id="score" class="text-2xl">0</span> / 20
                </div>
                <div class="w-48 h-4 bg-pink-100/50 rounded-full border-2 border-white shadow-inner overflow-hidden">
                    <div id="fill"
                        class="w-0 h-full bg-gradient-to-r from-pink-500 to-red-400 shadow-[0_0_10px_rgba(236,72,153,0.5)]">
                    </div>
                </div>
            </div>
        </div>

        <canvas id="gameCanvas" class="w-full h-full cursor-none"></canvas>

        <div id="victory-screen"
            class="hidden absolute inset-0 bg-white/90 backdrop-blur-xl z-20 flex flex-col items-center justify-center p-8 text-center">

            <div id="quiz-container" class="space-y-6">
                <h1 class="font-game text-4xl text-pink-600">
                    Kahit may mga hindi ka nasalo,<br>nasalo mo pa din ako sa tunay na bohai üòò
                </h1>

                <div class="bg-pink-50 p-6 rounded-3xl border-2 border-pink-200 shadow-lg">
                    <p id="quiz-question" class="text-pink-800 font-semibold mb-4 text-lg">
                        Pero wait lang bago ipagpatuloy,<br>kailan ang birthday ko?
                    </p>

                    <input type="text" id="answer-input"
                        class="w-full px-4 py-3 rounded-2xl border-2 border-pink-300 focus:border-pink-500 focus:outline-none text-center"
                        placeholder="Format: December 26 2001">

                    <button onclick="checkAnswer()"
                        class="mt-4 w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 rounded-2xl transition">
                        Submit Answer
                    </button>

                    <p id="error-msg" class="mt-3 text-red-500 text-sm font-medium h-4"></p>
                </div>
            </div>

            <div id="final-message" class="hidden space-y-6 relative">
                <div class="text-6xl animate-bounce">‚ù§Ô∏è</div>
                <h1 class="font-game text-5xl text-pink-600">Will you be my Valentine?</h1>

                <div class="flex gap-4 justify-center relative h-20">
                    <button id="yesBtn"
                        class="bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-full font-bold shadow-lg transition hover:scale-110">
                        YES! ‚ù§Ô∏è
                    </button>

                    <button id="noBtn"
                        class="bg-gray-200 text-gray-600 px-8 py-3 rounded-full font-bold shadow-md absolute">
                        No üôà
                    </button>
                </div>
            </div>
        </div>
    </div>


    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const fillEl = document.getElementById('fill');
        const victoryScreen = document.getElementById('victory-screen');
        const quizContainer = document.getElementById('quiz-container');
        const finalMessage = document.getElementById('final-message');
        const answerInput = document.getElementById('answer-input');
        const errorMsg = document.getElementById('error-msg');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const quizQuestion = document.getElementById('quiz-question');
const audio = document.getElementById("audio");

function startGame() {
    audio.play().catch(err => console.log(err));
    document.getElementById("startScreen").style.display = "none";
    update(); // start animation loop here
}


        canvas.width = 600;
        canvas.height = 700;

        let score = 0;
        const targetScore = 20;
        let hearts = [];
        let particles = [];
        let floatingTexts = [];
        let playerX = canvas.width / 2;
        let gameActive = true;
        let currentPhase = 1;
        let noClicks = 0;
        let yesScale = 1;

        const sweetMessages = [
            "Ang galing mo!",
            "Parang ako lang sinasalo mo üòâ",
            "Uy tumitibok puso ko!",
            "Sayo na ako sayo talaga ehe!!",
            "Ikaw na talaga forever and ever!"
        ];

        const fallingImage = new Image();
        fallingImage.src = "player.png";

        window.addEventListener("mousemove", moveHandler);
        window.addEventListener("touchmove", moveHandler);

        function moveHandler(e) {
            const rect = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            playerX = (clientX - rect.left) * (canvas.width / rect.width);
        }

        function createHeart() {
            const size = 40 + Math.random() * 40;
            hearts.push({
                x: Math.random() * (canvas.width - size),
                y: -100,
                speed: 3 + Math.random() * (score * 0.2),
                size
            });
        }

        function createParticles(x, y) {
            for (let i = 0; i < 10; i++) {
                particles.push({
                    x, y,
                    size: Math.random() * 6 + 4,
                    speedX: (Math.random() - 0.5) * 4,
                    speedY: (Math.random() - 0.5) * 4,
                    life: 30
                });
            }
        }

        function createFloatingText(x, y) {
            floatingTexts.push({
                text: sweetMessages[Math.floor(Math.random() * sweetMessages.length)],
                x, y, opacity: 1
            });
        }

        function drawParticles() {
            particles.forEach((p, i) => {
                p.x += p.speedX;
                p.y += p.speedY;
                p.life--;
                ctx.fillStyle = "rgba(255,105,180,0.7)";
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
                if (p.life <= 0) particles.splice(i, 1);
            });
        }

        function drawFloatingTexts() {
            floatingTexts.forEach((t, i) => {
                t.y -= 1;
                t.opacity -= 0.02;
                ctx.fillStyle = `rgba(255,0,100,${t.opacity})`;
                ctx.font = "16px Poppins";
                ctx.fillText(t.text, t.x, t.y);
                if (t.opacity <= 0) floatingTexts.splice(i, 1);
            });
        }

        function drawPlayer() {
            ctx.font = "60px serif";
            ctx.textAlign = "center";
            ctx.fillText("üß∫", playerX, canvas.height - 40);
        }

        function update() {
            if (!gameActive) return;

            if (score >= targetScore) {
                victoryScreen.classList.remove("hidden");
                gameActive = false;
                return;
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (Math.random() < 0.05) createHeart();

            hearts.forEach((heart, i) => {
                heart.y += heart.speed;
                ctx.drawImage(fallingImage, heart.x, heart.y, heart.size, heart.size);

                if (heart.y > canvas.height - 110 &&
                    heart.x > playerX - 60 &&
                    heart.x < playerX + 60) {
                    createParticles(heart.x, heart.y);
                    createFloatingText(heart.x, heart.y);
                    hearts.splice(i, 1);
                    score++;
                    scoreEl.innerText = score;
                    fillEl.style.width = `${(score / targetScore) * 100}%`;
                }

                if (heart.y > canvas.height) hearts.splice(i, 1);
            });

            drawParticles();
            drawFloatingTexts();
            drawPlayer();
            requestAnimationFrame(update);
        }

        // fallingImage.onload = () => update();

        function checkAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();

            if (currentPhase === 1) {
                if (userAnswer === "december 26 2001") {
                    currentPhase = 2;
                    answerInput.value = "";
                    quizQuestion.innerHTML = "Galing! ‚ù§Ô∏è<br>Last na... Ano favorite color ko?";
                    answerInput.placeholder = "Format: Red";
                    errorMsg.innerText = "";
                } else {
                    errorMsg.innerText = "Aa kinakalimutan mo na agad parang hindi pa tayo isang taon e eme HAHAHAHHAHA!";
                    answerInput.value = "";
                }
            } else {
                if (userAnswer === "blue") {
                    quizContainer.classList.add("hidden");
                    finalMessage.classList.remove("hidden");
                } else {
                    errorMsg.innerText = "Hala! Nakalimutan mo üò≠";
                    answerInput.value = "";
                }
            }
        }

        /* ----------- NEW NO BUTTON BEHAVIOR ----------- */

        /* ----------- FIXED NO BUTTON + RANDOM TOAST ----------- */

        const noMessages = [
            "Bakit ayaw mo na sakin? üò¢",
            "Bakit di mo na ako love? üíî",
            "May iba ka na ba? üò≠",
            "Ganun nalang ba yun? ü•∫",
            "Masakit ha... üíò"
        ];

        function showToast(message) {
            const toast = document.createElement("div");
            toast.className = "toast";
            toast.innerText = message;
            document.body.appendChild(toast);

            setTimeout(() => toast.classList.add("show"), 100);

            setTimeout(() => {
                toast.classList.remove("show");
                setTimeout(() => toast.remove(), 400);
            }, 2500);
        }

        noBtn.style.position = "relative"; // fixed lang sa pwesto

        noBtn.addEventListener("click", () => {
            noClicks++;

            // random message
            const randomMsg = noMessages[Math.floor(Math.random() * noMessages.length)];
            showToast(randomMsg);

            // palakihin YES
            yesScale += 0.25;
            yesBtn.style.transform = `scale(${yesScale})`;

            // optional: pag sobrang laki na, disable NO
            if (yesScale >= 3) {
                noBtn.style.opacity = "0";
                noBtn.style.pointerEvents = "none";
                noBtn.style.transition = "all 0.4s ease";
            }

            yesBtn.addEventListener("click", () => {
                window.location.href = "yes.html";
            });

        });
    </script>


</body>


</html>




